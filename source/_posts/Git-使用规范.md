---
title: Git 使用规范
date: 2021-04-29 15:18:36
tags:
  - Git
  - 基础开发
categories: 基础开发
---

Gitea 是一个开源的代码托管平台, 具有占用内存小, 运行速度快等优点, 通常用于代码版本管理以及问题反馈, 个人版本通常使用 Gitea 用作代码仓库.

<!-- more -->

## 账户管理

### 新建账户

- Gitea 账号需要管理员在`管理后台`新建, 暂不提供注册功能
- 新增的 Gitea 账号需要管理员拉入团队中

### 账户配置

1. 个人用户登录 Gitea 账号后, 在用户设置中修改个人头像, 以便于项目组成员区分. 账号使用`名字拼音`
1. 生成 ssh {% post_link 前端开发配置规范 前端开发配置规范 %}

## 新建代码仓库

1. 非管理员无法在项目组中新建项目, 代码仓库的新建**需要**通过管理员完成
1. 仓库目录**必须**包括 `.gitignore` 文件对代码提交与否进行管理, **严禁**提交如 `target/`, `dist/` 等输出目录与 `node_modules/` 等资源目录, 静态资源目录不做限制
1. 项目**必须**包括 `README.md` 文件对当前项目进行说明, 包括
   - 项目的简介
   - 项目的安装与使用方法
   - 项目特殊问题的处理与解决方案
   - 文件夹目录结构
   - 使用的接口列表
1. 分支初始化后**需要**完成一次初始化提交以保证代码历史记录的显示

## 本地代码仓库下载

1. **推荐**通过 `git clone` 新建本地代码目录
2. **可以**通过本地创建目录后使用 `git pull --allow-unrelated-histories` 拉取线上仓库并处理冲突后提交, **严禁**提交无历史记录追溯的代码

## 代码分支提交/合并

1. **严禁**使用 `git push -f` 强制提交代码
1. 项目无法直接提交到 `master` 分支, 需通过新建分支, 提交 `merge/pull request` 完成代码合并
1. 代码合并上游分支(如 develop 等基础开发分支)时**推荐**使用 `merge[拉取]` 方法, 在不熟悉的情况下**严禁** `rebase[拉取(变基)]` 上游分支
1. git 提交时**需要**包含每次修改的具体内容, 遵守适量多次的原则, **严禁**一次提交大量更新, 通常单次提交的修改内容不超过 100 行
1. git 日志提交参考[日志提交模板](https://gist.githubusercontent.com/jmaxhu/8e7fb69a7dcec1b9b953/raw/ce7dd000639c2483d88def71bc47661fb36a7d4d/.git-commit-template.txt), 最基础的格式为 `{版本号}, {类型}:{主题}`

长的开发分支**严禁** `rebase[拉取(变基)]` 上游分支, 这个会带来大量冲突.

**推荐**每次开发一个功能时新建一个分支, 命名形如`feat-{功能点}`, 使用 `rebase[拉取(变基)]` 完成上游分支的本地合并, 完成功能开发后**必须**删除当前开发分支

## 代码合并

1. 发起 `merge/pull request` 时确认人选择为管理员, 审核人设置为其他开发者与测试
1. 代码合并的评审需要审核人确保代码库的`整体质量的提升为基础原则`
1. 代码合并请求会自动向钉钉群组推送通知, 请注意查收并及时处理.
